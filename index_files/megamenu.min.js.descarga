/*! Max Mega Menu jQuery Plugin */(function(a){"use strict";a.maxmegamenu=function(f,j){var b=this,c=a(f),d=c.siblings(".mega-menu-toggle"),i={event:c.attr("data-event"),effect:c.attr("data-effect"),effect_speed:parseInt(c.attr("data-effect-speed")),effect_mobile:c.attr("data-effect-mobile"),effect_speed_mobile:parseInt(c.attr("data-effect-speed-mobile")),panel_width:c.attr("data-panel-width"),panel_inner_width:c.attr("data-panel-inner-width"),mobile_force_width:c.attr("data-mobile-force-width"),mobile_overlay:c.attr("data-mobile-overlay"),mobile_state:c.attr("data-mobile-state"),second_click:c.attr("data-second-click"),vertical_behaviour:c.attr("data-vertical-behaviour"),document_click:c.attr("data-document-click"),breakpoint:c.attr("data-breakpoint"),unbind_events:c.attr("data-unbind"),hover_intent_timeout:c.attr("data-hover-intent-timeout"),hover_intent_interval:c.attr("data-hover-intent-interval")},h,e,g;b.settings={},e=a("li.mega-menu-megamenu.mega-menu-item-has-children,li.mega-menu-flyout.mega-menu-item-has-children,li.mega-menu-tabbed > ul.mega-sub-menu > li.mega-menu-item-has-children,li.mega-menu-flyout li.mega-menu-item-has-children",f),g=a("li.mega-menu-megamenu li.mega-menu-item-has-children.mega-collapse-children > a.mega-menu-link",f),b.addAnimatingClass=function(c){if(b.settings.effect==="disabled")return;a(".mega-animating").removeClass("mega-animating");var d=b.settings.effect_speed+parseInt(megamenu.timeout,10);c.addClass("mega-animating"),setTimeout(function(){c.removeClass("mega-animating")},d)},b.hideAllPanels=function(){a(".mega-toggle-on > a.mega-menu-link",c).each(function(){b.hidePanel(a(this),!1)})},b.expandMobileSubMenus=function(){a(".mega-menu-item-has-children.mega-expand-on-mobile > a.mega-menu-link",c).each(function(){b.showPanel(a(this))}),b.settings.mobile_state=='expand_all'&&a(".mega-menu-item-has-children > a.mega-menu-link",c).each(function(){b.showPanel(a(this))}),b.settings.mobile_state=='expand_active'&&a("li.mega-current-menu-ancestor.mega-menu-item-has-children > a.mega-menu-link,li.mega-current-menu-item.mega-menu-item-has-children > a.mega-menu-linkli.mega-current-menu-parent.mega-menu-item-has-children > a.mega-menu-linkli.mega-current_page_ancestor.mega-menu-item-has-children > a.mega-menu-linkli.mega-current_page_item.mega-menu-item-has-children > a.mega-menu-link",c).each(function(){b.showPanel(a(this))})},b.hideSiblingPanels=function(c,d){c.parent().parent().find(".mega-toggle-on").children("a.mega-menu-link").each(function(){b.hidePanel(a(this),d)})},b.isDesktopView=function(){var a=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0);return a>b.settings.breakpoint},b.isMobileView=function(){return!b.isDesktopView()},b.showPanel=function(d){if(d.is("li.mega-menu-item")&&(d=d.find("a.mega-menu-link").first()),d.parent().triggerHandler("before_open_panel"),d.parent().find("[aria-expanded]").first().attr("aria-expanded","true"),a(".mega-animating").removeClass("mega-animating"),b.isMobileView()&&d.parent().hasClass("mega-hide-sub-menu-on-mobile"))return;if(b.isDesktopView()&&(c.hasClass("mega-menu-horizontal")||c.hasClass("mega-menu-vertical"))&&!d.parent().hasClass("mega-collapse-children")&&b.hideSiblingPanels(d,!0),(b.isMobileView()&&c.hasClass("mega-keyboard-navigation")||b.settings.vertical_behaviour==="accordion")&&b.hideSiblingPanels(d,!1),b.calculateDynamicSubmenuWidths(d),d.parent().hasClass("mega-collapse-children")||b.settings.effect==="slide"||b.isMobileView()&&(b.settings.effect_mobile==="slide"||b.settings.effect_mobile==="slide_left"||b.settings.effect_mobile==="slide_right")){var e=b.isMobileView()?b.settings.effect_speed_mobile:b.settings.effect_speed;d.siblings(".mega-sub-menu").css("display","none").animate({height:"show",paddingTop:"show",paddingBottom:"show",minHeight:"show"},e,function(){a(this).css("display","")})}d.parent().addClass("mega-toggle-on").triggerHandler("open_panel")},b.hidePanel=function(c,d){if(c.is("li.mega-menu-item")&&(c=c.find("a.mega-menu-link").first()),c.parent().triggerHandler("before_close_panel"),c.parent().find("[aria-expanded]").first().attr("aria-expanded","false"),c.parent().hasClass("mega-collapse-children")||!d&&b.settings.effect==="slide"||b.isMobileView()&&(b.settings.effect_mobile==="slide"||b.settings.effect_mobile==="slide_left"||b.settings.effect_mobile==="slide_right")){var e=b.isMobileView()?b.settings.effect_speed_mobile:b.settings.effect_speed;c.siblings(".mega-sub-menu").animate({height:"hide",paddingTop:"hide",paddingBottom:"hide",minHeight:"hide"},e,function(){c.siblings(".mega-sub-menu").css("display",""),c.parent().removeClass("mega-toggle-on").triggerHandler("close_panel")});return}d&&c.siblings(".mega-sub-menu").css("display","none").delay(b.settings.effect_speed).queue(function(){a(this).css("display","").dequeue()}),c.siblings(".mega-sub-menu").find(".widget_media_video video").each(function(){this.player.pause()}),c.parent().removeClass("mega-toggle-on").triggerHandler("close_panel"),b.addAnimatingClass(c.parent())},b.calculateDynamicSubmenuWidths=function(d){var g,h,e,f;d.parent().hasClass("mega-menu-megamenu")&&d.parent().parent().hasClass("max-mega-menu")&&b.settings.panel_width&&a(b.settings.panel_width).length>0&&(b.isDesktopView()?(g=c.offset(),h=a(b.settings.panel_width).offset(),d.siblings(".mega-sub-menu").css({width:a(b.settings.panel_width).outerWidth(),left:h.left-g.left+"px"})):d.siblings(".mega-sub-menu").css({width:"",left:""})),d.parent().hasClass("mega-menu-megamenu")&&d.parent().parent().hasClass("max-mega-menu")&&b.settings.panel_inner_width&&a(b.settings.panel_inner_width).length>0&&(e=0,a(b.settings.panel_inner_width).length?e=parseInt(a(b.settings.panel_inner_width).width(),10):e=parseInt(b.settings.panel_inner_width,10),f=parseInt(d.siblings(".mega-sub-menu").innerWidth(),10),b.isDesktopView()&&e>0&&e<f?d.siblings(".mega-sub-menu").css({paddingLeft:(f-e)/2+"px",paddingRight:(f-e)/2+"px"}):d.siblings(".mega-sub-menu").css({paddingLeft:"",paddingRight:""}))},b.bindClickEvents=function(){var c=!1,d;a(document).on({touchmove:function(a){c=!0},touchstart:function(a){c=!1}}),a(document).on("click touchend",function(d){!c&&b.settings.document_click==="collapse"&&!a(d.target).closest(".max-mega-menu li").length&&!a(d.target).closest(".mega-menu-toggle").length&&(b.hideAllPanels(),b.hideMobileMenu()),c=!1}),d=a("> a.mega-menu-link",e).add(g),d.on("touchend.megamenu",function(a){b.settings.event==="hover_intent"&&b.unbindHoverIntentEvents(),b.settings.event==="hover"&&b.unbindHoverEvents()}),d.not("[data-has-click-event]").on("click.megamenu",function(d){if(b.isDesktopView()&&a(this).parent().hasClass("mega-toggle-on")&&a(this).closest("ul.mega-sub-menu").parent().hasClass("mega-menu-tabbed")){if(b.settings.second_click==="go")return;d.preventDefault();return}if(c)return;if(b.isMobileView()&&a(this).parent().hasClass("mega-hide-sub-menu-on-mobile"))return;(b.settings.second_click==="go"||a(this).parent().hasClass("mega-click-click-go"))&&a(this).attr("href")!==void 0?a(this).parent().hasClass("mega-toggle-on")||(d.preventDefault(),b.showPanel(a(this))):(d.preventDefault(),a(this).parent().hasClass("mega-toggle-on")?b.hidePanel(a(this),!1):b.showPanel(a(this)))}),g.each(function(){a(this).attr("data-has-click-event","true")}),b.settings.second_click==="disabled"&&d.off("click.megamenu"),a(".mega-close-after-click:not(.mega-menu-item-has-children) > a.mega-menu-link",f).on("click",function(){b.hideAllPanels(),b.hideMobileMenu()})},b.bindHoverEvents=function(){e.on({"mouseenter.megamenu":function(){b.unbindClickEvents(),a(this).hasClass("mega-toggle-on")||b.showPanel(a(this).children("a.mega-menu-link"))},"mouseleave.megamenu":function(){a(this).hasClass("mega-toggle-on")&&!a(this).hasClass("mega-disable-collapse")&&!a(this).parent().parent().hasClass("mega-menu-tabbed")&&b.hidePanel(a(this).children("a.mega-menu-link"),!1)}})},b.bindHoverIntentEvents=function(){e.hoverIntent({over:function(){b.unbindClickEvents(),a(this).hasClass("mega-toggle-on")||b.showPanel(a(this).children("a.mega-menu-link"))},out:function(){a(this).hasClass("mega-toggle-on")&&!a(this).hasClass("mega-disable-collapse")&&!a(this).parent().parent().hasClass("mega-menu-tabbed")&&b.hidePanel(a(this).children("a.mega-menu-link"),!1)},timeout:b.settings.hover_intent_timeout,interval:b.settings.hover_intent_interval})},b.bindKeyboardEvents=function(){var g=9,m=27,h=13,i=37,j=38,k=39,l=40,f=32;c.parent().on("keyup.megamenu",".max-mega-menu, .mega-menu-toggle",function(b){var d=b.keyCode||b.which,e=a(b.target);d===g&&c.parent().addClass("mega-keyboard-navigation")}),c.parent().on("keydown.megamenu","a.mega-menu-link, .mega-indicator, .mega-menu-toggle-block, .mega-menu-toggle-animated-block button",function(o){var n,g,r,p,q;if(!c.parent().hasClass("mega-keyboard-navigation"))return;if(n=o.keyCode||o.which,g=a(o.target),n===f&&g.is(".mega-menu-link")&&(o.preventDefault(),g.parent().is(e)&&(g.parent().hasClass("mega-toggle-on")&&!g.closest("ul.mega-sub-menu").parent().hasClass("mega-menu-tabbed")?b.hidePanel(g):b.showPanel(g))),n===f&&g.is("mega-indicator")&&(o.preventDefault(),g.parent().parent().hasClass("mega-toggle-on")&&!g.closest("ul.mega-sub-menu").parent().hasClass("mega-menu-tabbed")?b.hidePanel(g.parent()):b.showPanel(g.parent())),n===m&&(r=a("> .mega-toggle-on",c).length!==0,a("> .mega-toggle-on",c).find("[tabindex]:visible").first().focus(),b.hideAllPanels(),b.isMobileView()&&!r&&(b.hideMobileMenu(),a(".mega-menu-toggle-block, button.mega-toggle-animated",d).first().focus())),n===f&&(o.preventDefault(),g.is(".mega-menu-toggle-block, .mega-menu-toggle-animated-block button")&&(d.hasClass("mega-menu-open")?b.hideMobileMenu():b.showMobileMenu())),n===h){if(g.is(".mega-menu-toggle-block")&&(d.hasClass("mega-menu-open")?b.hideMobileMenu():b.showMobileMenu()),g.is(".mega-indicator")){g.closest("li.mega-menu-item").hasClass("mega-toggle-on")&&!g.closest("ul.mega-sub-menu").parent().hasClass("mega-menu-tabbed")?b.hidePanel(g.parent()):b.showPanel(g.parent());return}if(g.parent().is(e)){if(g.is("[href]")&&g.siblings(".mega-indicator[tabindex]:visible").length!==0)return;if(g.is("[href]")===!1){g.parent().hasClass("mega-toggle-on")&&!g.closest("ul.mega-sub-menu").parent().hasClass("mega-menu-tabbed")?b.hidePanel(g):b.showPanel(g);return}if(g.parent().hasClass("mega-toggle-on")&&!g.closest("ul.mega-sub-menu").parent().hasClass("mega-menu-tabbed"))return;o.preventDefault(),b.showPanel(g)}}(n===k&&b.isDesktopView()||n===l&&b.isMobileView())&&c.hasClass("mega-menu-horizontal")&&(o.preventDefault(),p=a("> .mega-toggle-on",c).nextAll("li.mega-menu-item:visible").find("> a.mega-menu-link, .mega-search span[role=button]").first(),p.length===0&&(p=a(":focus",c).parent().nextAll("li.mega-menu-item:visible").find("> a.mega-menu-link, .mega-search span[role=button]").first()),p.length===0&&(p=a(":focus",c).parent().parent().parent().nextAll("li.mega-menu-item:visible").find("> a.mega-menu-link, .mega-search span[role=button]").first()),b.hideAllPanels(),p.focus()),(n===i&&b.isDesktopView()||n===j&&b.isMobileView())&&c.hasClass("mega-menu-horizontal")&&(o.preventDefault(),q=a("> .mega-toggle-on",c).prevAll("li.mega-menu-item:visible").find("> a.mega-menu-link, .mega-search span[role=button]").last(),q.length===0&&(q=a(":focus",c).parent().prevAll("li.mega-menu-item:visible").find("> a.mega-menu-link, .mega-search span[role=button]").last()),q.length===0&&(q=a(":focus",c).parent().parent().parent().prevAll("li.mega-menu-item:visible").find("> a.mega-menu-link, .mega-search span[role=button]").last()),b.hideAllPanels(),q.focus())}),c.parent().on("focusout.megamenu",function(a){c.parent().hasClass("mega-keyboard-navigation")&&setTimeout(function(){var a=c.parent().find(":focus").length>0;a||(c.parent().removeClass("mega-keyboard-navigation"),b.hideAllPanels(),b.hideMobileMenu())},10)})},b.unbindAllEvents=function(){a("ul.mega-sub-menu, li.mega-menu-item, li.mega-menu-row, li.mega-menu-column, a.mega-menu-link, .mega-indicator",f).off()},b.unbindClickEvents=function(){a("> a.mega-menu-link",e).not(g).off("click.megamenu touchend.megamenu")},b.unbindHoverEvents=function(){e.unbind("mouseenter.megamenu mouseleave.megamenu")},b.unbindHoverIntentEvents=function(){e.unbind("mouseenter mouseleave").removeProp("hoverIntent_t").removeProp("hoverIntent_s")},b.unbindKeyboardEvents=function(){c.parent().off("keyup.megamenu keydown.megamenu focusout.megamenu")},b.unbindMegaMenuEvents=function(){b.settings.event==="hover_intent"&&b.unbindHoverIntentEvents(),b.settings.event==="hover"&&b.unbindHoverEvents(),b.unbindClickEvents(),b.unbindKeyboardEvents()},b.bindMegaMenuEvents=function(){b.unbindMegaMenuEvents(),b.isDesktopView()&&b.settings.event==="hover_intent"&&b.bindHoverIntentEvents(),b.isDesktopView()&&b.settings.event==="hover"&&b.bindHoverEvents(),b.bindClickEvents(),b.bindKeyboardEvents()},b.checkWidth=function(){b.isMobileView()&&c.data("view")==="desktop"&&b.switchToMobile(),b.isDesktopView()&&c.data("view")==="mobile"&&b.switchToDesktop(),b.calculateDynamicSubmenuWidths(a("> li.mega-menu-megamenu > a.mega-menu-link",c))},b.reverseRightAlignedItems=function(){!a("body").hasClass("rtl")&&c.hasClass("mega-menu-horizontal")&&c.append(c.children("li.mega-item-align-right").get().reverse())},b.addClearClassesToMobileItems=function(){a(".mega-menu-row",c).each(function(){a("> .mega-sub-menu > .mega-menu-column:not(.mega-hide-on-mobile)",a(this)).filter(":even").addClass("mega-menu-clear")})},b.initDesktop=function(){c.data("view","desktop"),b.bindMegaMenuEvents(),b.initIndicators()},b.switchToDesktop=function(){c.data("view","desktop"),b.bindMegaMenuEvents(),b.reverseRightAlignedItems(),b.hideAllPanels(),b.hideMobileMenu(!0)},b.initMobile=function(){b.switchToMobile()},b.switchToMobile=function(){c.data("view","mobile"),b.bindMegaMenuEvents(),b.initIndicators(),b.reverseRightAlignedItems(),b.addClearClassesToMobileItems(),b.hideAllPanels(),b.expandMobileSubMenus()},b.initToggleBar=function(){d.on("click",function(c){a(c.target).is(".mega-menu-toggle, .mega-menu-toggle-custom-block *, .mega-menu-toggle-block, .mega-menu-toggle-animated-block, .mega-menu-toggle-animated-block *, .mega-toggle-blocks-left, .mega-toggle-blocks-center, .mega-toggle-blocks-right, .mega-toggle-label, .mega-toggle-label span")&&(c.preventDefault(),a(this).hasClass("mega-menu-open")?b.hideMobileMenu():b.showMobileMenu())})},b.initIndicators=function(){a(".mega-indicator",c).not("[data-has-click-event]").on("click.megamenu",function(c){c.preventDefault(),c.stopPropagation(),a(this).closest(".mega-menu-item").hasClass("mega-toggle-on")?(!a(this).closest("ul.mega-sub-menu").parent().hasClass("mega-menu-tabbed")||b.isMobileView())&&b.hidePanel(a(this).parent(),!1):b.showPanel(a(this).parent(),!1)}),a(".mega-indicator",c).each(function(){a(this).attr('data-has-click-event','true')})},b.hideMobileMenu=function(e){if(e=e||!1,!d.is(":visible")&&!e)return;h=setTimeout(function(){a("body").removeClass(c.attr("id")+"-mobile-open"),a("html").removeClass(c.attr("id")+"-off-canvas-open")},b.settings.effect_speed_mobile),a(".mega-toggle-label, .mega-toggle-animated",d).attr("aria-expanded","false"),b.settings.effect_mobile==="slide"&&!e?c.animate({height:"hide"},b.settings.effect_speed_mobile,function(){c.css({width:"",left:"",display:""}),d.removeClass("mega-menu-open")}):(c.css({width:"",left:"",display:""}),d.removeClass("mega-menu-open")),c.triggerHandler("mmm:hideMobileMenu")},b.showMobileMenu=function(){if(!d.is(":visible"))return;clearTimeout(h),a("body").addClass(c.attr("id")+"-mobile-open"),b.expandMobileSubMenus(),(b.settings.effect_mobile==="slide_left"||b.settings.effect_mobile==="slide_right")&&a("html").addClass(c.attr("id")+"-off-canvas-open"),a(".mega-toggle-label, .mega-toggle-animated",d).attr("aria-expanded","true"),b.settings.effect_mobile==="slide"&&c.animate({height:"show"},b.settings.effect_speed_mobile,function(){a(this).css("display","")}),d.addClass("mega-menu-open"),b.toggleBarForceWidth(),c.triggerHandler("mmm:showMobileMenu")},b.toggleBarForceWidth=function(){var e,f;a(b.settings.mobile_force_width).length&&(b.settings.effect_mobile==="slide"||b.settings.effect_mobile==="disabled")&&(e=d.offset(),f=a(b.settings.mobile_force_width).offset(),c.css({width:a(b.settings.mobile_force_width).outerWidth(),left:f.left-e.left+"px"}))},b.init=function(){c.triggerHandler("before_mega_menu_init"),b.settings=a.extend({},i,j),c.removeClass("mega-no-js"),b.initToggleBar(),b.settings.unbind_events==="true"&&b.unbindAllEvents(),a(window).on("load",function(){b.calculateDynamicSubmenuWidths(a("> li.mega-menu-megamenu > a.mega-menu-link",c))}),b.isDesktopView()?b.initDesktop():b.initMobile(),a(window).on("resize",function(){b.checkWidth()}),c.triggerHandler("after_mega_menu_init")},b.init()},a.fn.maxmegamenu=function(b){return this.each(function(){if(void 0===a(this).data("maxmegamenu")){var c=new a.maxmegamenu(this,b);a(this).data("maxmegamenu",c)}})},a(function(){a(".max-mega-menu").maxmegamenu()})})(jQuery)